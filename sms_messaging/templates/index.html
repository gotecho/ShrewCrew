<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <meta charset="UTF-8">
    <title>311 SMS Dashboard</title>
    <script defer src="{{ url_for('static', filename='script.js') }}"></script>
    <style>
        /* Optional styling for inputs */
        .filter-input {
            width: 90%;
            padding: 5px;
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <header id="websiteHeader">
        <h1> ShrewTech Admin Dashboard </h1>
        <p> Created by The Shrew Crew </p>
        <p> The following dashboard is a record of all messages sent to and from the 311 hotline number.</p>
    </header>
    <table id="smsTable">
        <thead>
            <tr>
                <th>#<br><input type="text" class="filter-input" onkeyup="filterTable(0)" placeholder="Filter"></th>
                <th>Direction<br><input type="text" class="filter-input" onkeyup="filterTable(1)" placeholder="Filter"></th>
                <th>Date Created<br><input type="text" class="filter-input" onkeyup="filterTable(2)" placeholder="Filter"></th>
                <th>Date Sent<br><input type="text" class="filter-input" onkeyup="filterTable(3)" placeholder="Filter"></th>
                <th>Error Code<br><input type="text" class="filter-input" onkeyup="filterTable(4)" placeholder="Filter"></th>
                <th>Error Message<br><input type="text" class="filter-input" onkeyup="filterTable(5)" placeholder="Filter"></th>
                <th>From<br><input type="text" class="filter-input" onkeyup="filterTable(6)" placeholder="Filter"></th>
                <th>To<br><input type="text" class="filter-input" onkeyup="filterTable(7)" placeholder="Filter"></th>
                <th>Status<br><input type="text" class="filter-input" onkeyup="filterTable(8)" placeholder="Filter"></th>
                <th>Cost<br><input type="text" class="filter-input" onkeyup="filterTable(9)" placeholder="Filter"></th>
                <th>Body<br><input type="text" class="filter-input" onkeyup="filterTable(10)" placeholder="Filter"></th>
            </tr>
        </thead>
        <tbody>
        {% for x in sms %}
            <tr>
                <td>{{ loop.index }}</td>  <!-- Ensure loop.index is available -->
                <td>{{ x.direction }}</td>
                <td>{{ x.date_created }}</td>
                <td>{{ x.date_sent }}</td>
                <td>{{ x.error_code or "N/A" }}</td>
                <td>{{ x.error_message or "N/A" }}</td>
                <td>{{ x.from_ }}</td>
                <td>{{ x.to }}</td>
                <td>{{ x.status }}</td>
                <td>{{ x.price }} {{ x.price_unit }}</td>
                <td>{{ x.body }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</body>
</html>
